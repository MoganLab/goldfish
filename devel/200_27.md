# [200_27] 从 s7.c 拆分出 s7_liii_string.c 和 s7_liii_string.h

## 任务相关的代码文件
- src/s7.c
- src/s7_liii_string.c（新增）
- src/s7_liii_string.h（新增）
- xmake.lua
- devel/200_27.md

## 如何测试
```
xmake b goldfish
bin/goldfish tests/goldfish/scheme/base-test.scm
```

### 验证结果
所有迁移函数均通过验证：
- ✅ 编译成功：`xmake b goldfish`
- ✅ 测试通过：`bin/goldfish tests/goldfish/scheme/base-test.scm`（string-upcase 和 string-downcase 相关测试）

## 2026/02/25 将 string-upcase 和 string-downcase 从 s7.c 迁移到 s7_liii_string.c

### What
将 `string-upcase` 和 `string-downcase` 函数从 `s7.c` 迁移到 `s7_liii_string.c`，包括：
1. 迁移 `g_string_upcase` 和 `g_string_downcase` 函数及直接依赖实现
2. 新增 `s7_liii_string.h`，补充迁移函数声明并与 `s7.c` 对接
3. 在 `s7.c` 中移除对应实现，改为包含 `s7_liii_string.h`
4. 在 `xmake.lua` 中新增 `src/s7_liii_string.c` 编译入口
5. 保持函数注册、优化路径和现有行为不变

### 依赖说明
`string-upcase` 和 `string-downcase` 实现依赖于以下 s7.c 内部机制：
- `is_string`, `string_length`, `string_value`, `make_empty_string`：字符串操作
- `method_or_bust_p`：类型错误处理
- `sc->string_upcase_symbol`, `sc->string_downcase_symbol`：符号引用
- `sc->pcl_s`：类型谓词
- `lowers[]` 和 `uppers[]`：大小写转换表（保持留在 s7.c 中，其他函数也需要）
- `LOOP_8` 宏：循环优化
- `chars[]`：字符缓存（可能用于其他字符串函数）

### Why
将字符串相关函数从庞大的 `s7.c` 中拆分出来，有助于：
- 代码模块化，提高可维护性
- 便于后续字符串功能的扩展和优化
- 与 `(liii string)` 库的实现保持一致性

### How
**方案：保持独立（不迁移静态数据）**

由于 `lowers[]` 和 `uppers[]` 转换表还被其他函数使用（如 `scheme_strcasecmp`、`scheme_strequal_ci`、`hash_map_ci_string`、`char-downcase`），将这些数组保留在 `s7.c` 中，采用以下方案：

1. 创建 `s7_liii_string.h` 头文件，声明需要导出的函数
2. 创建 `s7_liii_string.c` 实现文件，包含 `g_string_upcase` 和 `g_string_downcase` 的实现
3. 在 `s7_liii_string.c` 中通过 `extern` 声明引用 `s7.c` 中的 `lowers[]` 和 `uppers[]` 数组
4. 在 `s7.c` 中移除原函数实现，改为包含 `s7_liii_string.h`
5. 更新 `xmake.lua` 添加新文件的编译
